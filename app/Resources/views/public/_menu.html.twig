<nav class="navbar navbar-expand-lg navbar-custom py-0 menu">
  <button class="navbar-toggler navbar-toggler-right" type="button"
          data-toggle="collapse" data-target="#navbarDropdown"
          aria-controls="navbarDropdown" aria-expanded="false"
          aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarDropdown">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item
                    {% if app.request.get('_route') == 'home' %}
                    active
                    {% endif %}">
        <a class="nav-link" href="{{ path('home',
        {'_locale': app.request.locale }) }}">
          {{ 'HOME'|trans }}</a>
      </li>
      <li class="nav-item
                    {% if app.request.get('_route') == 'about_us' %}
                    active
                    {% endif %}">
        <a class="nav-link" href="{{ path('about_us',
        {'_locale': app.request.locale }) }}">
          {{ 'ABOUT_US'|trans }}</a>
      </li>
      <li class="nav-item
                    {% if app.request.get('_route') == 'categories' %}
                    active
                    {% endif %}">
        <a class="nav-link" href="{{ path('categories',
        {'_locale': app.request.locale }) }}">
          {{ 'CATEGORIES'|trans }}</a>
      </li>
      <li class="nav-item
                    {% if app.request.get('_route') == 'search' or
      app.request.get('_route') == 'search_form' %}
                    active
                    {% endif %}">
        <a class="nav-link" href="{{ path('search_form',
        {'_locale': app.request.locale }) }}">
          {{ 'SEARCH'|trans }}</a>
      </li>
      <li class="nav-item
                    {% if app.request.get('_route') == 'contact' %}
                    active
                    {% endif %}">
        <a class="nav-link" href="{{ path('contact',
        {'_locale': app.request.locale }) }}">
          {{ 'CONTACT'|trans }}</a>
      </li>
      <li class="nav-item"><a class="nav-link" href="{{ path('rss') }}">RSS</a>
      </li>
    </ul>
    <ul class="navbar-nav">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#"
           id="langDropdown" data-toggle="dropdown"
           aria-haspopup="true"
           aria-expanded="false">
          {{ 'LANGUAGE'|trans }}</a>
        <div class="dropdown-menu m-0 rounded-0"
             aria-labelledby="langDropdown">
          {% for locale in locales() %}
            <a class="dropdown-item" href="{{ path(
            app.request.get('_route', 'home'),
            app.request.get('_route_params', [])|
            merge({_locale: locale.code})) }}">
              {{ locale.name|capitalize }}
            </a>
          {% endfor %}
        </div>
      </li>
      {% if app.user %}
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#"
           id="langDropdown" data-toggle="dropdown"
           aria-haspopup="true"
           aria-expanded="false">
          {{ 'WELCOME'|trans }}, {{ app.user.name|default('') }}</a>
        <div class="dropdown-menu dropdown-menu-right
                                m-0 rounded-0"
             aria-labelledby="langDropdown">
          <a class="dropdown-item" href="{{ path('admin',
          {'_locale': app.request.locale }) }}">
            {{ 'ADMIN_PANEL'|trans }}</a>
          <a class="dropdown-item" href="{{ path('admin_posts_add',
          {'_locale': app.request.locale }) }}">
            {{ 'ADMIN_POSTS_ADD'|trans }}</a>
          <a class="dropdown-item" href="{{ path('admin_pages_add',
          {'_locale': app.request.locale }) }}">
            {{ 'ADMIN_PAGES_ADD'|trans }}</a>
          <a class="dropdown-item" href="{{ path('admin_categories_add',
          {'_locale': app.request.locale }) }}">
            {{ 'ADMIN_CATEGORIES_ADD'|trans }}</a>
          <div class="dropdown-divider"></div>
          {% if post.type is defined %}
            {% if post.type == 'post' %}
              <span class="edit-badge">
                <a class="dropdown-item" href="{{ path('admin_posts_edit',
                { 'id': post.id }) }}">{{ 'POST_EDIT'|trans }}</a>
              </span>
            {% else %}
              <span class="edit-badge">
                <a class="dropdown-item" href="{{ path('admin_pages_edit',
                { 'id': post.id }) }}">{{ 'PAGE_EDIT'|trans }}</a>
              </span>
            {% endif %}
            <div class="dropdown-divider"></div>
          {% endif %}
          <a class="dropdown-item" href="{{ path('logout',
          {'_locale': app.request.locale }) }}">
            {{ 'LOGOUT'|trans }}</a>
        </div>
      </li>
      {% else %}
      <li class="nav-item
                    {% if app.request.get('_route') == 'login' %}
                    active
                    {% endif %}">
        <a class="nav-link" href="{{ path('login',
        {'_locale': app.request.locale }) }}">
          {{ 'LOGIN'|trans }}</a>
        {% endif %}
      </li>
    </ul>
  </div>
</nav>
