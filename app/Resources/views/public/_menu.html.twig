<nav class="navbar navbar-expand-md navbar-custom py-0 menu">
  <button class="navbar-toggler navbar-toggler-right" type="button"
          data-toggle="collapse" data-target="#navbarDropdown"
          aria-controls="navbarDropdown" aria-expanded="false"
          aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarDropdown">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item
                    {% if app.request.get('_route') == 'home' %}
                    active
                    {% endif %}">
        <a class="nav-link" href="{{ path('home',
        {'_locale': app.request.locale }) }}">
          {{ 'HOME'|trans }}</a>
      </li>
      {% for page in pages %}
        <li class="nav-item
                    {% if app.request.requestUri == '/'~app.request.locale~'/'~page.slug %}
                    active
                    {% endif %}">
          <a class="nav-link"
             href="{{ path('post', { 'slug': page.slug }) }}">
            {% if app.request.locale == 'es' %}
              {{ page.titleEs }}
            {% else %}
              {{ page.titleEn }}
            {% endif %}
          </a>
        </li>
      {% endfor %}
    </ul>
    <ul class="navbar-nav">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#"
           id="langDropdown" data-toggle="dropdown"
           aria-haspopup="true"
           aria-expanded="false">
          {{ 'LANGUAGE'|trans }}</a>
        <div class="dropdown-menu m-0 rounded-0"
             aria-labelledby="langDropdown">
          {% for locale in locales() %}
            <a class="dropdown-item" href="{{ path(
            app.request.get('_route', 'blog_index'),
            app.request.get('_route_params', [])|
            merge({_locale: locale.code})) }}">
              {{ locale.name|capitalize }}
            </a>
          {% endfor %}
        </div>
      </li>
      {% if app.user %}
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#"
           id="langDropdown" data-toggle="dropdown"
           aria-haspopup="true"
           aria-expanded="false">
          {{ 'WELCOME'|trans }}, {{ app.user.name|default('') }}</a>
        <div class="dropdown-menu dropdown-menu-right
                                m-0 rounded-0"
             aria-labelledby="langDropdown">
          <a class="dropdown-item" href="{{ path('admin',
          {'_locale': app.request.locale }) }}">
            {{ 'ADMIN_PANEL'|trans }}</a>
          <a class="dropdown-item" href="{{ path('admin_posts_add',
          {'_locale': app.request.locale }) }}">
            {{ 'ADMIN_POSTS_ADD'|trans }}</a>
          <a class="dropdown-item" href="{{ path('admin_pages_add',
          {'_locale': app.request.locale }) }}">
            {{ 'ADMIN_PAGES_ADD'|trans }}</a>
          <a class="dropdown-item" href="{{ path('admin_categories_add',
          {'_locale': app.request.locale }) }}">
            {{ 'ADMIN_CATEGORIES_ADD'|trans }}</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="{{ path('logout',
          {'_locale': app.request.locale }) }}">
            {{ 'LOGOUT'|trans }}</a>
        </div>
      </li>
      {% else %}
      <li class="nav-item
                    {% if app.request.get('_route') == 'login' %}
                    active
                    {% endif %}">
        <a class="nav-link" href="{{ path('login',
        {'_locale': app.request.locale }) }}">
          {{ 'LOGIN'|trans }}</a>
        {% endif %}
      </li>
    </ul>
  </div>
</nav>
